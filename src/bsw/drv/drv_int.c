/*******************************************************************************
 * @file        drv_int.c
 * @author      Modulo Medito (chcchc1995@outlook.com)
 * @brief
 *
 * @version     0.0.1
 * @date        2024-07-31
 * @copyright   Copyright (C) 2024. All rights reserved.
 ******************************************************************************/
/******************************************************************************/
/* INCLUDE                                                                    */
/******************************************************************************/
#include "drv_int.h"

/******************************************************************************/
/* DEFINE                                                                     */
/******************************************************************************/

/******************************************************************************/
/* TYPEDEF                                                                    */
/******************************************************************************/

/******************************************************************************/
/* ENUM                                                                       */
/******************************************************************************/

/******************************************************************************/
/* STRUCTURE                                                                  */
/******************************************************************************/

/******************************************************************************/
/* UNION                                                                      */
/******************************************************************************/

/******************************************************************************/
/* LOCAL INLINE FUNCTION DECLARATION                                          */
/******************************************************************************/

/******************************************************************************/
/* LOCAL FUNCTION DECLARATION                                                 */
/******************************************************************************/
interrupt void s_isr_timer1();
interrupt void s_isr_timer2();

/******************************************************************************/
/* GLOBAL FUNCTION DECLARATION                                                */
/******************************************************************************/

/******************************************************************************/
/* LOCAL VARIABLE DEFINITION                                                  */
/******************************************************************************/
static void (*s_isr_timer1_job)(void) = NULL;
static void (*s_isr_timer2_job)(void) = NULL;

/******************************************************************************/
/* GLOBAL VARIABLE DEFINITION                                                 */
/******************************************************************************/

/******************************************************************************/
/* GLOBAL FUNCTION DEFINITION                                                 */
/******************************************************************************/
void drv_int_regist_isr_timer1(void (*isr)(void)) {
    s_isr_timer1_job = isr;
    mcu_int_regist_isr(mcu_int_INT_CPU_TIMER1, &s_isr_timer1);
}

void drv_int_enable_isr_timer1() {
    mcu_int_ENABLE_ISR(mcu_int_INT_CPU_TIMER1);
}

void drv_int_regist_isr_timer2(void (*isr)(void)) {
    s_isr_timer2_job = isr;
    mcu_int_regist_isr(mcu_int_INT_CPU_TIMER2, &s_isr_timer2);
}

void drv_int_enable_isr_timer2() {
    mcu_int_ENABLE_ISR(mcu_int_INT_CPU_TIMER2);
}

/******************************************************************************/
/* LOCAL FUNCTION DEFINITION                                                  */
/******************************************************************************/
interrupt void s_isr_timer1() {
    if (s_isr_timer1_job != NULL) {
        s_isr_timer1_job();
    }
}

interrupt void s_isr_timer2() {
    if (s_isr_timer2_job != NULL) {
        s_isr_timer2_job();
    }
}

/******************************************************************************/
/* LOCAL INLINE FUNCTION DEFINITION                                           */
/******************************************************************************/
